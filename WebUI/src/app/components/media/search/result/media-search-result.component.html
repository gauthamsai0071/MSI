<div class="media-search-result-wrapper">
    <div class="list-view-label-wrapper">
        <msi-icon name="ic_data_table" class="ic-data-table"></msi-icon>
        <p class="list-view-label">List View</p>
        <div class="list-top-actions" *ngIf="table.selectedRows.length > 0">
            <img src="../../../../../assets/applications/ic_incident_add.svg" height="22px" width="22px"
                [msiDropdownTriggerFor]="basicDropdown" [attr.openOnHover]="true" />
            <msi-dropdown #basicDropdown>
                <msi-dropdown-item (click)="addMediaToIncident('create',table.selectedRows)">Add to new Incident
                </msi-dropdown-item>
                <msi-dropdown-item>Add to existing incident
                </msi-dropdown-item>
            </msi-dropdown>
            <msi-icon name="ic_share_manager" class="ic-data-table" title="Share"></msi-icon>
            <msi-icon name="ic_download" class="ic-data-table" title="Download"></msi-icon>
            <msi-icon name="ic_trash" class="ic-data-table" title="Delete"></msi-icon>
        </div>
    </div>
    <table class="msiDatatable" msi-data-table #table [rows]="rows" style="width: 100%;" [condensed]="false"
        [sticky]="true" [pinning]="false" [selection]="true" [horizontalScrollbar]="true"     (scrolledToBottom)="onScrolledToBottom($event)" [virtualScroll]="true">
        <ng-container class="search-results">
            <ng-container msiColDef colType="action" colLock="left" [width]="50" [fixedWidth]="true"
                *ngIf="table.selection">
                <ng-container *msiHeaderCellDef>
                    <msi-checkbox [checked]="table.selectionState === 'all'"
                        [indeterminate]="table.selectionState === 'some'" (click)="table.toggleAllRowsSelected($event)"
                        [disabled]="false">
                    </msi-checkbox>
                </ng-container>
                <ng-container *msiCellDef="let row">
                    <msi-checkbox [(ngModel)]="table.getRowState(row).selected" (change)="table.updateSelectionState()">
                    </msi-checkbox>
                </ng-container>
            </ng-container>
            <ng-container [sortable]="false" [width]="45" [fixedWidth]="true" msiColDef="icon" [filterable]="false"
                [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef></ng-container>
                <ng-container *msiCellDef="let row">
                    <msi-icon (click)="onMediaPlay( row )" name="ic_media_play" class="ic-media-play"></msi-icon>
                </ng-container>
            </ng-container>

            <ng-container *ngIf="showhidecolumns['media_name']" [fixedWidth]="true" [width]="190" msiColDef="name"
                [sortable]="true" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Name</ng-container>
                <ng-container *msiCellDef="let row">
                    <a class="anchor-fileName" href="javascript:void (0)">
                        <div msiTooltip="{{row.name}}">
                            {{row.name}}
                        </div>
                    </a>
                </ng-container>
            </ng-container>
            <ng-container [width]="170" [fixedWidth]="true" *ngIf="showhidecolumns['timestamp']" msiColDef="Retention"
                [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Capture Date</ng-container>
                <ng-container *msiCellDef="let row">
                    {{row.timestamp | date:'MM/dd/YYYY HH:mm'}}
                </ng-container>
            </ng-container>
            <ng-container [width]="120" [fixedWidth]="true" *ngIf="showhidecolumns['mimeType']" msiColDef="Retention"
                [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Media Type</ng-container>
                <ng-container *msiCellDef="let row">
                    <div msiTooltip="{{row.mimeType}}">
                        {{row.mimeType}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container [width]="100" [fixedWidth]="true" *ngIf="showhidecolumns['media_duration']"
                msiColDef="Retention" [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Duration</ng-container>
                <ng-container *msiCellDef="let row">
                    <div msiTooltip="{{row.media_duration}}">
                        {{row.media_duration}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container [width]="125" [fixedWidth]="true" *ngIf="showhidecolumns['talkgroupId']"
                msiColDef="Retention" [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Talkgroup ID</ng-container>
                <ng-container *msiCellDef="let row">
                    <div msiTooltip="{{row.talkgroupId}}" position = 'left'>
                        {{row.talkgroupId}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container [width]="120" [fixedWidth]="true" *ngIf="showhidecolumns['agencyName']" msiColDef="Retention"
                [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Agency</ng-container>
                <ng-container *msiCellDef="let row">
                    <div msiTooltip="{{row.agencyName}}">
                        {{row.agencyName}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container [width]="93" [fixedWidth]="true" *ngIf="showhidecolumns['unitId']" msiColDef="Retention"
                [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Unit ID</ng-container>
                <ng-container *msiCellDef="let row">
                    <div msiTooltip="{{row.unitId}}">
                        {{row.unitId}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container [width]="100" [fixedWidth]="true" *ngIf="showhidecolumns['channel']" msiColDef="Retention"
                [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Channel</ng-container>
                <ng-container *msiCellDef="let row">
                    <div msiTooltip="{{row.channel}}">
                        {{row.channel}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container [width]="93" [fixedWidth]="true" *ngIf="showhidecolumns['siteId']" msiColDef="Retention"
                [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Site ID</ng-container>
                <ng-container *msiCellDef="let row">
                    <div msiTooltip="{{row.siteId}}">
                        {{row.siteId}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container [width]="93" [fixedWidth]="true" *ngIf="showhidecolumns['zoneId']" msiColDef="Retention"
                [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Zone ID</ng-container>
                <ng-container *msiCellDef="let row">
                    <div msiTooltip="{{row.zoneId}}">
                        {{row.zoneId}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container [width]="150" [fixedWidth]="true" *ngIf="showhidecolumns['rscAlias']" msiColDef="Retention"
                [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Resource Alias</ng-container>
                <ng-container *msiCellDef="let row">
                    <div msiTooltip="{{row.rscAlias}}">
                        {{row.rscAlias}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container [width]="150" [fixedWidth]="true" *ngIf="showhidecolumns['individualAlias']"
                msiColDef="Retention" [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Individual Alias</ng-container>
                <ng-container *msiCellDef="let row">
                    <div msiTooltip="{{row.individualAlias}}">
                        {{row.individualAlias}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container [width]="100" [fixedWidth]="true" *ngIf="showhidecolumns['system']" msiColDef="Retention"
                [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>System</ng-container>
                <ng-container *msiCellDef="let row">
                    <div msiTooltip="{{row.system}}">
                        {{row.system}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container [width]="150" [fixedWidth]="true" *ngIf="showhidecolumns['originatingMDN']"
                msiColDef="Retention" [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Originating MDN</ng-container>
                <ng-container *msiCellDef="let row">
                    <div msiTooltip="{{row.originatingMDN}}">
                        {{row.originatingMDN}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container [width]="150" [fixedWidth]="true" *ngIf="showhidecolumns['terminatingMDN']"
                msiColDef="Retention" [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Terminating MDN</ng-container>
                <ng-container *msiCellDef="let row">
                    <div msiTooltip="{{row.terminatingMDN}}">
                        {{row.terminatingMDN}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container [width]="150" [fixedWidth]="true" *ngIf="showhidecolumns['participatingMDN']"
                msiColDef="Retention" [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Participating MDN</ng-container>
                <ng-container *msiCellDef="let row">
                    <div msiTooltip="{{row.participatingMDN}}">
                        {{row.participatingMDN}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container [width]="150" [fixedWidth]="true" *ngIf="showhidecolumns['talkgroupName']"
                msiColDef="Retention" [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef>Talkgroup Name</ng-container>
                <ng-container *msiCellDef="let row">
                    <div msiTooltip="{{row.talkgroupName}}">
                        {{row.talkgroupName}}
                    </div>
                </ng-container>
            </ng-container>
            <ng-container [width]="45" [fixedWidth]="true" msiColDef="Retention" 
                [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef></ng-container>
                <ng-container *msiCellDef="let row">
                    <img src="../../../../../assets/applications/ic_incident_add.svg" height="22px" width="22px"/>
                </ng-container>
            </ng-container>
            <ng-container [width]="45" [fixedWidth]="true" msiColDef="Retention" 
                [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef></ng-container>
                <ng-container *msiCellDef="let row">
                    <msi-icon name="ic_record_incident"></msi-icon>
                </ng-container>
            </ng-container>
            <ng-container [width]="45" [fixedWidth]="true" msiColDef="Retention" 
                [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef></ng-container>
                <ng-container *msiCellDef="let row">
                    <msi-icon name="ic_information"></msi-icon>
                </ng-container>
            </ng-container>
            <ng-container [width]="45" [fixedWidth]="true" msiColDef="Retention" 
                [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef></ng-container>
                <ng-container *msiCellDef="let row">
                    <msi-icon name="ic_redaction_project"></msi-icon>
                </ng-container>
            </ng-container>
            <ng-container [width]="45" [fixedWidth]="true" msiColDef="Retention" 
                [sortable]="false" [filterable]="false" [draggable]="true" [resizable]="true">
                <ng-container *msiHeaderCellDef></ng-container>
                <ng-container *msiCellDef="let row">
                    <msi-icon name="ic_bookmark_add_mark"></msi-icon>
                </ng-container>
            </ng-container>
        </ng-container>
    </table>
    <msi-spinner *ngIf="isLoading" class="spinner" size="large"></msi-spinner>
</div>